
\section{Approach 1: A Single-Thread program}
\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black]
    \begin{lstlisting}[language=C]
    unsigned long long int count_point_inside
    (unsigned long long int npoints, unsigned char *img){
    unsigned long long inside = 0ULL;
    for (unsigned long long i = 0; i < npoints; i++) {
        double x = -1.0 + (double)rand() / 
        (double)RAND_MAX * 2.0; // [-1,1]
        double y = -1.0 + (double)rand() / 
        (double)RAND_MAX * 2.0; // [-1,1]
        if (x * x + y * y <= 1.0) inside++;
        int px = (int)((x + 1.0) * 0.5 * (W - 1));
        int py = (int)((y + 1.0) * 0.5 * (H - 1));
        if (px >= 0 && px < W && py >= 0 && py < H) {
            int idx = (py * W + px) * 3;
            double r2 = x*x + y*y;
            img[idx + 0] = (r2 <= 1.0) ? 0 : 255;   // R
            img[idx + 1] = (r2 <= 1.0) ? 255 : 0; // G
            img[idx + 2] = (r2 <= 1.0) ? 0 : 0;   // B
        }
    }
    return inside;
}
    \end{lstlisting}
\end{tcolorbox}